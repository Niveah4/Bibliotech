package modelos;

import java.util.Scanner;
import modelos.exceptions.InvalidEmailFormatException;
import modelos.validacoes.ValidacaoEmail;

public class Cadastrar  {

    public static Scanner scann = new Scanner(System.in);

    public static void cadastrarUsuario(int opcao, String nome) {

        String email = solicitarEmail();
        String cpf = solicitarCpf();
        String senha = solicitarSenha();

        if (opcao == 1) { // opção de leitor

                String matricula = solicitarMatricula();
                Leitor leitor = new Leitor(nome, email, cpf, senha, matricula);
                System.out.println("Leitor cadastrado com sucesso: " + leitor.getNome());

        } else if (opcao == 2) { // opção de administrador
                String siape = solicitarSiape();
                Admnistrador adm = new Admnistrador(nome, email, cpf, senha, siape);
                System.out.println("Administrador cadastrado com sucesso: " + adm.getNome());
                
        } else {
                System.out.println("Tipo de usuário não identificado.");
        }
    }

    private static String solicitarEmail() {
        String email;
        while (true) {
            System.out.println("Digite seu email:");
            email = scann.nextLine();
            try {
                ValidacaoEmail.validarEmail(email);
                System.out.println("Email válido.");
                break;
            } catch (InvalidEmailFormatException e) {
                System.out.println("Email inválido: " + e.getMessage());
                System.out.println("Insira seu email novamente.");
            }
        }
        return email;
    }
    
    private static String solicitarCpf() {
        System.out.println("Digite seu CPF:");
        return scann.nextLine();
    }

    private static String solicitarSenha() {
        System.out.println("Digite sua senha:");
        return scann.nextLine();
    }

    private static String solicitarMatricula() {
        System.out.println("Digite sua matrícula:");
        return scann.nextLine();
    }

    private static String solicitarSiape() {
        System.out.println("Digite seu SIAPE:");
        return scann.nextLine();
    }
}